= Implementation Considerations
:render_as: Level4
:v291_section: 3.6+

== Implementation Notes

=== Swapping a patient

Some systems may handle this as a single function. Others may require a multiple process in which:

{empty}a) patient A is assigned a temporary location

{empty}b) patient B is assigned patient A's location

{empty}c) patient A is assigned patient B's prior location

This threeâ€‘step scenario requires three separate transfer messages instead of a single swap message. If all beds in a hospital are occupied, it may be necessary to use a dummy location.

=== Merging patient/person information

==== Definitions: Merge, move, and change identifier events

The term "identifier" is used throughout this section. An identifier is associated with a set (or sets) of data. For example, an identifier (_PID-3 - Patient Identifier List_) may be a medical record number which has associated with it account numbers (_PID-18 - Patient Account Number_). Account number (_PID-18 - Patient Account Number_) is a type of identifier which may have associated with it visit numbers (_PV1-19 - Visit Number_).

This section addresses the events that occur usually for the purposes of correcting errors in person, patient, account, or visit identifiers. The types of errors that occur typically fall into three categories:

{empty}1) *Duplicate identifier created* +

The registrar fails to identify an existing person, patient, account, or visit and creates a new, "duplicate" record instead of using the existing record. A "merge" operation is used to fix this type of error.

{empty}2) *Incorrect identifier selected* +

The registrar mistakenly selects the wrong person, patient, or account and creates or attaches a patient, account, or visit underneath the incorrect person, patient, or account. A "move" operation is used to fix this type of error.

{empty}3) *Incorrect identifier assigned* +

The registrar accidentally types in the wrong new identifier for a person, patient, account, or visit. This type of mistake usually occurs when identifiers are manually assigned (not system generated). A "change identifier" operation is used to fix this type of error.

===== Hierarchy of Identifiers

This section was written from the perspective of one controlling MPI and does not adequately cover the implementation of peer MPIs or multiple enterprise identifiers. To avoid future problems implementors should carefully examine the inferences of multiple identifiers.

Enterprise level MPI systems may collaborate forming either peer-to-peer or hierarchical relationships. When this occurs, multiple enterprise level identifiers may be required in the context of a single HL7 message. An example of a peer-to-peer MPI relationship might be represented by a data sharing application between the US Department of Veterans Affairs and the US Department of Defense, where each have their own MPI. An example of a hierarchical MPI relationship might be required by the need for local, city, and state organizations to collaborate, where each have an MPI.

These events assume a hierarchy of identifiers exists between person, patient, account, and visit. The hierarchy is as follows:

Level 3 - Patient (identified by _PID-3 - Patient Identifier List_)

Level 2 - Account (identified by _PID-18 - Patient Account Number_)

Level 1 - Visit (identified by _PV1-19 - Visit Number_)

The visit-level identifier _PV1-19 - Visit Number_ is the lowest level identifier and is considered subordinate to the account-level identifier _PID-18 - Patient Account Number_.

This means that visit identifiers are defined within the context of an account identifier, and implies that visit identifiers are unique within account identifiers. Similarly, account identifiers are subordinate to, and unique within, patient identifiers; patient identifiers are subordinate to, and unique within, person identifiers.

Conversely, the person-level identifier is the highest-level identifier and is considered superior to the patient-level identifiers, which are superior to the account-level identifier, which is superior to any visit-level identifiers.

Note that these events will also apply to environments in which one or more of these levels do not occur. For example, some environments may not have a person (or MPI) level, or they may not have a visit level, or they may have a visit level without an account level. The hierarchy concept is depicted graphically below. For example, Adam Everyman might be assigned an MPI number at the Good Health Hospital network (depicted by the circle). He may have different medical records at two hospitals within the network (depicted by the squares). Associated with each of these medical records are two accounts (depicted by the triangles). Note that the environment illustrated does not support the "visit" level, although in other implementations it might.

____

image:extracted-media/media/image1.wmf[extracted-media/media/image1,width=499,height=174]

____

===== Merge

A merge event signals that two distinct records have been combined together into a single record with a single set of identifiers and data surviving at the level of the merge. All records at a level subordinate to the merged identifier are combined under the surviving record. For example, an A40 (merge patient - patient identifier list) event would be sent to signal that two person records (identified by _MRG-1 - Prior Patient ID_ and by _PID-3 - Patient ID_) have been merged into a single record. All of the identifiers, accounts, and visits under the person record are not merged together - they are instead combined under the same person record. The following figure graphically depicts the merge event:

____

image:extracted-media/media/image2.wmf[extracted-media/media/image2]

____

*Note:* It is not the intent of the merge definition to define the application or implementation specifics of how various systems or environments define, use or handle non-surviving information. "Non-surviving" in this document implies that a data set was existing in a fashion that was incorrect. Merging it into a new data set in itself implies that where there were two datasets, there is now only one. The means by which any system or environment conveys this new data set and the absence of the previous data set to the user is application specific. It is noted that some systems may still physically keep these "incorrect" datasets for audit trail or other purposes.

===== Move

A "move" involves transferring one or more datasets (identified by a subordinate identifier) from one superior identifier at the next hierarchical level to another superior identifier at the next hierarchical level, while all identifiers involved retain their original value. An exception to retaining the original identifier value may occur if any of the subordinate source identifiers already exist under the target superior identifier. In this case the identifier value may have to be renumbered in order to be uniquely identified under the target superior identifier. (Refer to section _3.6.2.2.8_, "link:#_A45_-_move_visit information - visi[_A45 - Move visit information_]" for an illustration of this.)

A move event signals that a patient, account, or visit has been moved from one person, patient, or account, respectively, to another. All records at a subordinate level are also moved. For example, an A43 (move patient information - patient identifier list) event would be sent to signal that a medical records administrator has moved a medical record attached to an incorrect person to a correct person. The following figure graphically depicts the move event:

____

image:extracted-media/media/image3.wmf[extracted-media/media/image3,width=576,height=174]

____

*Note*: The move event implies that all data related to the incorrect source ID and its subordinate IDs (specified in the MRG segment) will be moved to the correct target ID (specified in the PID or PV1 segment). Specifying each subordinate ID in repeating PID/MRG/PV1 sets is optional but not recommended.

===== Change identifier

A change identifier event signals that a single person, patient, account, or visit identifier has been changed. It does not reflect a merge or a move; it is simply a change of an identifier. For example, a "Change Identifier" event would be sent to signal that the registrar has changed an incorrectly assigned person identifier to a correct person identifier. The following picture graphically depicts this event:

____

image:extracted-media/media/image4.wmf[extracted-media/media/image4]

____

===== Source and target identifiers

===== Tightly coupled relationship

When patient/person identifiers are the target in merge, move, or change events, as specified in the _PID-2 - Patient ID_, _PID-3 - Patient Identifier List_ and _PID-4 - Alternate Patient ID-PID_, the associated source identifiers in the _MRG-4 - Prior Patient ID_, _MRG-1 - Prior Patient Identifier List_, and _MRG-2 - Prior Alternate Patient ID_, respectively, must be "tightly coupled." Each event that is defined as a merge, move, or change message carries the "tightly" coupled relationship at the appropriate level in one of two ways: first, by virtue of positional placement in the sequence of identifiers; or, second, by identifier type and assigning authority. The methodology used to establish the definition of "tightly coupled" relationship is determined by site negotiation. The recommended definition is by virtue of positional placement in the sequence of identifiers (pairwise). In addition, HL7 allows the use of the second definition by identifier type and assigning authority as an acceptable convention to establish a "tightly coupled" relationship. In the absence of a site negotiated definition, it is assumed that the positional placement of the identifiers is the default method.

The list of identifiers can be aligned positionally in their respective segment fields and processed by the receiving system by virtue of their order. This is sometimes referred to as an "ordered pairwise" relationship and is described further in section _3.6.2.1.7_, "link:#ordered-pairwise-relationship[_Ordered pairwise relationship_]".

Alternatively, the uniqueness of the identifiers included in the message is determined by the combination of identifier type and assigning authority. It is assumed that both sending system and receiving system can inspect both of these qualifiers as a message is constructed or processed to determine the "tightly coupled" relationship between the identifiers. This can be referred to as "identifier type/assigning authority" relationship and is described further in section _3.6.2.1.8_, "link:#_Identifier_type_/_assigning authori[_Identifier type/assigning authority relationship_]".

The pairing of identifiers between the MRG segment fields and their associated identifiers in the PID or PV1 segment are defined below:

[width="100%",cols="31%,9%,60%",]

|===

|*Person* | |

|_PID-2 - Patient ID_ |*_with_* |_MRG-4 - Prior Patient ID_

|*Patient* | |

|_Pid-3 - Patient Identifier List_ |*_with_* |_MRG-1 - Prior Patient Identifier List_

| |*_and by_* |Explicit order of identifiers in the list

| |*_or by_* |_<identifier type code>_ and _<assigning authority>_ field components

|_PID-4 - Alternate Patient ID_ |*_with_* |_MRG-2 - Prior Alternate Patient ID_

|*Account* | |

|_PID-18 - Patient Account Number_ |*_with_* |_MRG-3 - Prior Patient Account Number_

|*Visit* | |

|_PV1-19 - Visit Number_ |*_with_* |_MRG-5 - Prior Visit Number_

|_PV1-50 - Alternate Visit ID_ |*_with_* |_MRG-6 - Prior Alternate Visit ID_

|===

===== Ordered pairwise relationship

In a strict sense, this type of relationship is characterized by a one-to-one association based on type (e.g., medical record number to medical record number, etc.) and the corresponding order of the element, and is typically found in list or set operations. However, for purposes of practical implementation, this relationship will be defined as a simple one-for-one pairing, as exists between the _PID-3 - Patient Identifier List_ and the _MRG-1 - Prior Patient Identifier List_. In other words, elements "A", "B", and "C" in the first list would directly correspond to elements "X", "Y", and "Z" in the second list. No consideration is made to the type or value of the corresponding elements; it is the explicit order of the elements which controls the association process. This scenario could be expressed as follows:

List~1~ = \{A,B,C}

List~2~ = \{X,Y,Z}

[width="100%",cols="100%",]

|===

|*A : X*

|*B : Y*

|*C : Z*

|===

A second scenario may arise which deserves mention. As in the list example above, elements "A", "B", and "C" in the first list would "pair-up" with elements "X", "Y", "Z", "Q", "R", and "S" in the second list. Again, no consideration is made to the type or value of the corresponding elements; it is the order and presence which controls the association process. This scenario could be expressed as follows:

List~1~ = \{A,B,C}

List~2~ = \{X,Y,Z,Q,R,S}

[width="100%",cols="100%",]

|===

|*A : X*

|*B : Y*

|*C : Z*

|*: Q*

|*: R*

|*: S*

|===

In the second scenario, the last three elements "Q", "R", and "S" are not affected and their value remains as if no association had been made.

A third scenario may arise which deserves mention. As in the list example above, elements "A", "B", "C", "D", "E", and "F" in the first list would "pair-up" with elements "X", "Y", and "Z" in the second list. Again, no consideration is made to the type or value of the corresponding elements; it is the order and presence which controls the association process. This scenario could be expressed as follows:

List~1~ = \{A,B,C,D,E,F}

List~2~ = \{X,Y,Z}

[width="100%",cols="100%",]

|===

|*A : X*

|*B : Y*

|*C : Z*

|*D :*

|*E :*

|*F :*

|===

In the third scenario, the last three elements "D", "E", and "F" are not affected and their value remains the same as if no association had been made.

===== Identifier type / assigning authority relationship

As stated earlier, the uniqueness of the identifiers included in a message can be determined by the combination of identifier type (t) and assigning authority (a). It is assumed that both sending system and receiving system can inspect both of these qualifiers as a message is constructed or processed. This method is used to determine the "tightly coupled" relationship between the identifiers. The implementation of this relationship exists between the _PID-3 - Patient Identifier List_ and the _MRG-1 - Prior Patient Identifier List_. In other words, elements "B^t2^a1", "C^t3^a1", "D^t4^a1", "A^t1^a1", "E^t5^a1", and "F^t6^a1" in the first list would be associated with elements "X^t1^a1", "Y^t2^a1", and "Z^t3^a1 in the second list. This scenario could be expressed as follows:

List~1~ = \{B^t2^a1,C^t3^a1,D^t4^a1,A^t1^a1,E^t5^a1,F^t6^a1}

List~2~ = \{X^t1^a1,Y^t2^a1,Z^t3^a1}

[width="100%",cols="100%",]

|===

|*B^t2^a1 : Y^t2^a1*

|*C^t3^a1 : Z^t3^a1*

|*D^t4^a1 :*

|*A^t1^a1 : X^t1^a1*

|*E^t5^a1 :*

|*F^t6^a1 :*

|===

In this scenario, the three elements which do not have corresponding identifier type and assigning authority "D^t4^a1", "E^t5^a1", and "F^t6^a1" are not affected and their value remains the same as if no association had been made.

A second scenario may arise which deserves mention. In the case of identifier type and assigning authority definition, the elements "A^t1^a1", "B^t2^a1", and "C^t3^a1" in the first list would be associated with elements "X^t4^a1", "Y^t2^a1", "Z^t3^a1", "Q^t1^a1", "R^t5^a1", and "S^t6^a1" in the second list. No consideration is made to the order of the identifiers; it is the identifier type and assigning authority of the corresponding elements which controls the association process. This scenario could be expressed as follows:

List~1~ = \{A^t1^a1,B^t2^a1,C^t3^a1}

List~2~ = \{X^t4^a1,Y^t2^a1,Z^t3^a1, Q^t1^a1,R^t5^a1,S^t6^a1}

[width="100%",cols="100%",]

|===

|*A^t1^a1 : Q^t1^a1*

|*B^t2^a1 : Y^t2^a1*

|*C^t3^a1 : Z^t3^a1*

|*: X^t4^a1*

|*: R^t5^a1*

|*: S^t6^a1*

|===

In the second scenario, the three elements which do not have corresponding identifier type and assigning authority "X^t4^a1", "R^t5^a1", and "S^t6^a1" are not affected and their value remains the same as if no association had been made.

===== Global merge and move message construct versus repeating segment message constructs

A flexible message construct is provided for merge trigger events. The message construct allows for a repeating set of PID, optional PD1, MRG, and optional PV1 segments as illustrated below:

MSH

EVN

\{ PID

{empty}[PD1]

MRG

{empty}[PV1]

}

Trigger events support the concept of a global move or merge, where all the subordinate identifiers are moved or merged. For example, the use case for A41 (merge account-patient account number) (Section _3.6.2.2.3_, "_A41 - merge account - patient account number (global)_") illustrates a merge on the patient account number (_PID-18 - Patient Account Number_). All subordinate identifiers (_PV1-19 - Visit Number_) are moved to the target _PID-18 - Patient Account Number Identifier_, even though they are not specified in the message.

A repeating segment message construct supports reporting of the subordinate identifiers using the repeating segments. This is illustrated in the use case for A40 (merge patient - patient identifier list) (Section _3.6.2.2.2_, "_A40 - merge patient - patient identifier list (repeating segment)_," A41 (merge account - patient account number) (Section _3.6.2.2.4_, "_A41 - merge account - patient account number (repeating segment)_"), and A45 (move visit information-visit number) (Section _3.6.2.2.9_ "_A45 - move visit information - visit number (repeating segment)_"). Specifying each subordinate ID in repeating segments is optional but not recommended. This construct can be used when renumbering of identifiers is necessary as illustrated in Sections _3.6.2.2.2_, "_A40 - merge patient - patient identifier list (repeating segment)_," _3.6.2.2.4_, "_A41 - merge account - patient account number (repeating segment)_," and _3.6.2.2.9_, "_A45 - move visit information - visit number (repeating segment)_," or to explicitly identify individual subordinate identifiers as illustrated in Section _3.6.2.2.9_, "_A45 - move visit information - visit number (repeating segment)_."

===== Identifier renumbering

===== Superior identifier reporting

==== Trigger events

===== A40 - merge patient - patient identifier list

[width="100%",cols="54%,46%",]

|===

|A40 - Merge patient - patient identifier list |

|Use Case - During the admission process, the registrar does not find a record for patient EVE EVERYWOMAN in the ADT system and creates a new record with patient identifier MR2. EVE EVERYWOMAN has actually been to the healthcare facility several times in the past under her maiden name, Eve Maidenname with patient identifier MR1. The problem persists for a while. During that time, several more accounts are assigned to Eve under her newly created patient ID MR2. Finally, the problem is discovered and Medical Records merges her two charts together leaving patient identifier MR1. All the accounts (ACCT1, ACCT2) that were assigned to MR2 are combined under MR1 as a result. |

|Target: _PID-3 - Patient Identifier List_ (Note: _PID-18 - Patient Account Number_ is not valued; all accounts associated with MR2 are combined under MR1). To merge _PID-18 - Patient Account Number_ data only, use event A41 (merge account-patient account number). To move _PID-18 - Patient Account Number_ data use event A44 (move account information-patient account number). |

|Source: _MRG-1 - Prior Patient Identifier List_) (Note: _MRG-3 - Prior Patient Account Number_ is not valued; all accounts associated with MR2 are combined under MR1.) |

a|

Example Transaction:

MSH\|^~\&\|REGADT\|MCM\|RSP1P8\|MCM\|200301051530\|SEC\|ADT^A40^ADT_A39\|00000003\|P\|2.8\|<cr>

EVN\|A40\|200301051530<cr>

PID\|\|\|MR1^^^XYZ\|\|MAIDENNAME^EVE\|....<cr>

MRG\|MR2^^^XYZ<cr>

|

|Before Merge |After Merge

a|

MR1 MR2

ACCT1 ACCT1

ACCT2 ACCT2

a|

MR1

ACCT1

ACCT2

ACCT1

ACCT2

a|

Implementation considerations: This scenario exists when two medical records are established for the same person.

Since there could be a discrepancy in the demographic information between the two records, reconciliation may be required. In the example above, the implementation allowed the older demographic information (in the PID) to survive. The demographics implied by the IDs in the MRG segment, did not survive. Surviving and non-surviving demographic information is application and implementation specific. An A08 (update patient information) event should be sent and/or negotiated as necessary to provide for implementation and application-specific needs.

|

|===

===== A40 - merge patient - patient identifier list (repeating segment)

[width="100%",cols="54%,46%",]

|===

|A40 - Merge patient - patient identifier list |

|Use Case - During the admission process, the registrar does not find a record for patient EVE EVERYWOMAN in the Patient Administration system and creates a new record with patient identifier MR2. EVE EVERYWOMAN has actually been to the healthcare facility several times in the past under her maiden name, EVE MAIDENNAME with patient identifier MR1. The problem persists for a while. During that time, several more accounts are assigned to EVE under her newly created patient ID MR2. Finally, the problem is discovered and Medical Records merges her two charts together leaving patient identifier MR1. All the accounts (ACCT1, ACCT2) that were assigned to MR2 are combined under MR1 as a result. Since the account numbers are not unique, they are also renumbered. |

|Target: _PID-3 - Patient Identifier List_ and _PID-18 - Patient Account Number_ |

|Source: _MRG-1 - Prior Patient Identifier List_ and _MRG-3 - Prior Patient Account Number_ |

a|

Example Transaction:

MSH\|^~\&\|REGADT\|MCM\|RSP1P8\|MCM\|200301051530\|SEC\|ADT^A40^ADT_A39\|00000003\|P\|2.8\|<cr>

EVN\|A40\|200301051530<cr>

PID\|\|\|MR1^^^XYZ\|\|EVERYWOMAN^EVE\|\|\|\|\|\|\|\|\|\|\|\|\|ACCT3<cr>

MRG\|MR2^^^XYZ\|\|ACCT1<cr>

PID\|\|\|MR1^^^XYZ\|\|EVERYWOMAN^EVE\|\|\|\|\|\|\|\|\|\|\|\|\|ACCT4<cr>

MRG\|MR2^^^XYZ\|\|ACCT2<cr>

|

|Before Merge |After Merge

a|

MR1 MR2

ACCT1 ACCT1*

ACCT2 ACCT2*

a|

MR1

ACCT1

ACCT2

ACCT3*

ACCT4*

*accounts renumbered

a|

Implementation considerations: This scenario exists when two medical records are established for the same person.

If the account numbers are not unique (as implied by the After Merge example above) and renumbering of the accounts is required, you must use repeating segments as illustrated in the Example Transaction. Refer to Section _3.6.2.1.9_, "_Global merge and move message construct versus repeating segment message constructs_," for additional information regarding message construct.

Since there could be a discrepancy in the demographic information between the two records, reconciliation may be required. In the example above, the implementation allowed the older demographic information (in the PID) to survive. The demographics implied by the IDs in the MRG segment, did not survive. Surviving and non-surviving demographic information is application and implementation specific. An A08 (update patient information) event should be sent and/or negotiated as necessary to provide for implementation and application specific needs.

|

|===

===== A41 - merge account - patient account number (global)

This event illustrates the concept of a global merge as defined in Section _3.6.2.1.9_, "_Global merge and move message construct versus repeating segment message constructs_."

[width="100%",cols="54%,46%",]

|===

|A41 - Merge account information - patient account number |

|Use Case - Eve Everywoman (patient identifier MR1) is a recurring outpatient at the Physical Therapy clinic at hospital XYZ with account number ACCT1. She has visited the clinic several times. When she arrives for therapy, a new registrar does not realize she already has an account and opens a new one with account number ACCT2. When the mistake is discovered, the two accounts are merged together, combining all visits under account ACCT1. |

|Target: _PID-18 - Patient Account Number_ |

|Source: _MRG-3 - Prior Patient Account Number_ |

a|

Example Transaction:

MSH\|^~\&\|REGADT\|MCM\|RSP1P8\|MCM\|200301051530\|SEC\|ADT^A41^ADT_A39\|00000005\|P\|2.8\|<cr>

EVN\|A41\|200301051530<cr>

PID\|\|\|MR1^^^XYZ\|\|EVERYWOMAN^EVE\|\|19501010\|M\|\|\|123 NORTH STREET^^NY^NY^10021\|\|(212)111-3333\|\|\|S\|\|ACCT1<cr>

MRG\|MR1^^^XYZ\|\|ACCT2<cr>

|

|Before Merge |After Merge

a|

MR1

ACCT1

96124

96126

ACCT2

96128

96130

a|

MR1

ACCT1

96124

96126

96128

96130

a|

Implementation considerations: This scenario exists when two accounts are established for the same patient.

The PV1 segment is not valued since this event is really a merge at the _PID-18 - Patient Account Number_ level. All identifiers below the _PID-18 - Patient Account Number_ are combined under the surviving Patient Account Number.

Since there could be a discrepancy in the demographic information between the two records, reconciliation may be required. Surviving and non-surviving demographic information is application and implementation specific. An A08 (update patient information) event should be sent and/or negotiated as necessary to provide for implementation and application-specific needs.

|

|===

===== A41 - merge account - patient account number (repeating segment)

This event illustrates the concept of a repeating segment merge as defined in _3.6.2.2.1_.

[width="100%",cols="54%,46%",]

|===

|A41 - Merge account - patient account number |

|Use Case - Eve Everywoman (patient identifier MR1) is a recurring outpatient at the Physical Therapy clinic at hospital XYZ with account number ACCT1. She has visited the clinic several times. When she arrives for therapy, a new registrar does not realize she already has an account and opens a new one with account number ACCT2. When the mistake is discovered, the two accounts are merged together, combining all visits under account ACCT1. |

|Target: _PID-18 - Patient Account Number_ and _PV1-19 - Visit Number_ |

|Source: _MRG-3 - Prior Patient Account Number_ and _MRG-5 - Prior Visit Number_ |

a|

Example Transaction:

MSH\|^~\&\|REGADT\|MCM\|RSP1P8\|MCM\|200301051530\|SEC\|ADT^A41^ADT_A39\|00000005\|P\|2.8\|<cr>

EVN\|A41\|200301051530<cr>

PID\|\|\|MR1^^^XYZ\|\|EVERYWOMAN^EVE\|\|19501010\|F\|\|\|123 NORTH STREET^^NY^NY^10021\|\|(212)111-3333\|\|\|S\|\|ACCT1<cr>

MRG\|MR1^^^XYZ\|\|ACCT2\|\|VISIT1<cr>

PV1\|1\|I\|\|\|\|\|\|\|\|\|\|\|\|\|\|\|\|\|VISIT3<cr>

PID\|\|\|MR1^^^XYZ\|\|EVERYWOMAN^EVE\|\|19501010\|F\|\|\|123 NORTH STREET^^NY^NY^10021\|\|(212)111-3333\|\|\|S\|\|ACCT1<cr>

MRG\|MR1^^^XYZ\|\|ACCT2\|\|VISIT2

PV1\|1\|I\|\|\|\|\|\|\|\|\|\|\|\|\|\|\|\|\|VISIT4<cr>

|

|Before Merge |After Merge

a|

MR1

ACCT1

VISIT1

VISIT2

ACCT2

VISIT1*

VISIT2*

*Visits erroneously assigned

a|

MR1

ACCT1

VISIT1

VISIT2

VISIT3**

VISIT4**

**Visits combined and renumbered as a result of merging the account

a|

Implementation considerations: This scenario exists when two accounts and associated visits are established for the same patient.

Repeating PID/MRG/PV1 segments report each Account Number and Visit Number affected. This construct is required since the visits are renumbered in this example.

Since there could be a discrepancy in the demographic information between the two records, reconciliation may be required. Surviving and non-surviving demographic information is application and implementation specific. An A08 (update patient information) event should be sent and/or negotiated as necessary to provide for implementation and application-specific needs.

|

|===

===== A42 - Merge visit - visit number

[width="100%",cols="54%,46%",]

|===

|A42 - Merge visit - visit number |

|Use Case - A42 (merge visit -visit number) - Eve Everywoman (patient identifier MR1) is a recurring outpatient at the Physical Therapy clinic at hospital XYZ with account number ACCT1. She has visited the clinic several times. When she arrives for therapy, two different registrars create a new visit numbers. The mistake is not discovered immediately and clinical data is recorded under both visit numbers. When the mistake is discovered, the two visits are merged together, leaving visit VISIT1. |

|Target: _PV1-19 - Visit Number_ |

|Source: _MRG-5 - Prior Visit Number_ |

a|

Example Transaction:

MSH\|^~\&\|REGADT\|MCM\|RSP1P8\|MCM\|200301051530\|SEC\|ADT^A42^ADT_A39\|00000005\|P\|2.8\|<cr>

EVN\|A42\|200301051530<cr>

PID\|\|\|MR1^^^XYZ\|\|EVERYEWOMAN^EVE\|\|19501010\|F\|\|\|123 NORTH STREET^^NY^NY^10021\|\|(212)111-3333\|\|\|S\|\|ACCT1<cr>

MRG\|MR1^^^XYZ\|\|ACCT1\|\|VISIT2<cr>

PV1\|1\|I\|\|\|\|\|\|\|\|\|\|\|\|\|\|\|\|\|VISIT1

|

|Before Merge |After Merge

a|

MR1

ACCT1

VISIT1

VISIT2

a|

MR1

ACCT1

VISIT1

|Implementation considerations: This scenario exists when two visits are established in error for the same patient and episode of care. |

|===

===== A43 - move patient information - patient identifier list

[width="100%",cols="53%,47%",]

|===

|A43 - Move patient information - patient identifier list |

|Use Case - information from ABC HMO is loaded to a repository system each month. Eve Everywoman is entered in January and assigned Enterprise Number 1 (E1). Eve has visited Hospital XYZ and is assigned medical record number MR1. Evi Everywoman (a different person) is also a member of ABC HMO loaded to the repository and assigned Enterprise Number E2. Evi has visited Hospital XYZ and is assigned medical record number MR1. Evi visits Clinic DEF where she is assigned medical record number MR2 which is erroneously associated with Eve's Enterprise Number (E1). When the error is discovered MR2 is moved from Enterprise Number E1 to E2. |

|Target: _PID-2 - Patient ID_ |

|Source: _MRG-4 - Prior Patient ID_ |

a|

Example transaction:

MSH\|^~\&\|REPOSITORY\|ENT\|RSP1P8\|MCM\|200301051530\|SEC\|ADT^A43^ADT_A43\|0000009\|P\|2.8\|<cr>

EVN\|A43\|200301051530<cr>

PID\|1\|E2\|MR2^^^ABCHMO\|\|\|EVERYWOMAN^EVI\|....<cr>

MRG\|MR2^^^ABCHMO\|\|\|E1<cr>

|

|Before Move |After Move

a|

E1 E2

MR1 MR1

MR2

a|

E1 E2

MR1 MR1

MR2

a|

Implementation considerations: _PID-3 - Patient Identifier List_ and _MRG-1 - Prior Patient Identifier List_ are the same value since the PID-3 value does not change in this scenario.

The example above would be expressed as follows. In the following example, the assigning authority ENT1 represents an Enterprise and the PE identifier type code represents the Person's Enterprise number. The MR1 identifier is omitted from the message because it is not moved.

MSH\|^~\&\|REPOSITORY\|ENT\|RSP1P8\|MCM\|200301051530\|SEC\|ADT^A43^ADT_A43\|0000009\|P\|2.8\|<cr>

EVN\|A43\|200301051530<cr>

PID\|1\|\|E2^^^ENT1^PE~MR2^^^ABCHMO^MR\|\|\|EVERYWOMAN^EVI\|....<cr>

MRG\|E1^^^ENT1^PE~MR2^^^ABCHMO^MR\|. . .<cr>

|

|===

===== A44 - move account information - patient account number

[width="100%",cols="54%,46%",]

|===

|A44 - Move account information - patient account number |

|Use Case - During the admission process, the admitting clerk uses the Medical Record Number of Adam Everyman III (MR1) instead of Adam Everyman, Jr. (MR2). The Patient Administration system assigns the new admission account number ACCT2. When the mistake is discovered, account ACCT2 is moved to the correct Medical Record, MR2. The account number is not changed. |

|Target: _PID-3 - Patient Identifier List_ and _PID-18 - Patient Account Number_ (Note: _PID-18 - Patient Account Number_ and _MRG-3 - Prior Patient Account Number_ will be the same since the account number does not change in this scenario). |

|Source: _MRG-1 - Prior Patient Identifier List_ and _MRG-3 - Prior Patient Account Number_ (NOTE: _MRG-3 - Prior Patient Account Number_ must be valued to indicate which account to move) |

a|

Example Transaction:

MSH\|^~\&\|REGADT\|MCM\|RSP1P8\|MCM\|200301051530\|SEC\|ADT^A44^ADT_A43\|00000007\|P\|2.8\|<cr>

EVN\|A44\|200301051530<cr>

PID\|\|\|MR2^^^XYZ\|\|Everyman^Adam^A^JR\|\|19501010\|M\|\|\|123 EAST STREET^^NY^NY^10021\|\|(212)111-3333\|\|\|S\|\|ACCT2<cr>

MRG\|MR1^^^XYZ\|\|ACCT2<cr>

|

|Before Move |After Move

a|

MR1 MR2

ACCT1 ACCT1

ACCT2

a|

MR1 MR2

ACCT1 ACCT1

ACCT2

|Implementation considerations: This scenario exists when two medical records legitimately exist for two different people and an account is incorrectly associated with the wrong medical record number. |

|===

===== A45 - move visit information - visit number (repeating segment)

[width="100%",cols="54%,46%",]

|===

|A45 - Move visit information - visit number |

|Use Case - Eve Everywoman (patient identifier MR1) is a recurring outpatient at the Physical Therapy and Speech Therapy clinics at hospital XYZ. She is assigned a different account for each clinic; her account number for Physical Therapy is ACCT1 and her account number for Speech Therapy is X1. However, on two different occasions, the Speech Therapy registrar accidentally assigned her visits (96102 and 96104) to the Physical Therapy account. The problem is later discovered and the corresponding visits are moved to the correct account. |

|Target: _PID-18 - Patient Account Number_ and _PV1-19 - Visit Number_. |

|Source: _MRG-3 - Prior Patient Account Number_ and _MRG-5 - Prior Visit Number_. |

a|

Example Transaction:

MSH\|^~\&\|REGADT\|MCM\|RSP1P8\|MCM\|200301051530\|SEC\|ADT^A45^ADT_A45\|00000005\|P\|2.8\|<cr>

EVN\|A45\|200301051530<cr>

PID\|\|\|MR1^^^XYZ\|\|EVERYWOMAN^EVE\|\|19501010\|M\|\|\|123 NORTH STREET^^NY^NY^10021\|\|(212)111-3333\|\|\|S\|\|X1<cr>

MRG\|MR1^^^XYZ\|\|ACCT1\|\|96102<cr>

PV1\|\|O\|PT\|\|\|\|\|\|\|\|\|\|\|\|\|\|\|\|96102<cr>

MRG\|MR1^^^XYZ\|\|ACCT1\|\|96104<cr>

PV1\|\|O\|PT\|\|\|\|\|\|\|\|\|\|\|\|\|\|\|\|96104<cr>

|

|Before Move |After Move

a|

MR1

ACCT1

96100

96102*

96104*

X1

96101

96103

96105

*Visits erroneously assigned

a|

MR1

ACCT1

96100

X1

96101

96102

96103

96104

96105

a|

In the above transaction/implementation, the application that generated the message assigns unique visit numbers.

Implementation Considerations: In this scenario the repeating MRG/PV1 construct is used to indicate which visits are moved, as illustrated in the Example Transaction__. MRG-5 - Prior Visit Number__ and _PV1-19 - Visit Number_ are the same values because the visit numbers do not change. Refer to section link:#_Global_merge_and_move message const[_3.6.2.1.9_], "link:#_Global_merge_and_move message const[_Global merge and move message construct versus repeating segment message constructs&#44;_]" for additional information regarding message construct.

|

|===

===== A45 - move visit information - visit number (repeating segment)

[width="100%",cols="54%,46%",]

|===

|A45 - Move visit information - visit number |

|Use Case -Eve Everywoman (patient identifier MR1) is a recurring outpatient at the Physical Therapy and Speech Therapy clinics at hospital XYZ. She is assigned a different account for each clinic; her account number for Physical Therapy is ACCT1 and her account number for Speech Therapy is X1. However, on two different occasions, the Speech Therapy registrar accidentally assigned her visits (VISIT2 and VISIT3) to the Physical Therapy account. The problem is later discovered and the corresponding visits are moved to the correct account. |

|Target: _PID-18 - Patient Account Number_ and _PV1-19 - Visit Number._ |

|Source: _MRG-3 - Prior Patient Account Number_ and _MRG-5 - Prior Visit Number_. |

a|

Example Transaction:

MSH\|^~\&\|REGADT\|MCM\|RSP1P8\|MCM\|200301051530\|SEC\|ADT^A45^ADT_A45\|00000005\|P\|2.8\|<cr>

EVN\|A45\|200301051530<cr>

PID\|\|\|MR1^^^XYZ\|\|EVERYWOMAN^EVE\|\|19501010\|M\|\|\|123 NORTH STREET^^NY^NY^10021\|\|(212)111-3333\|\|\|S\|\|X1<cr>

MRG\|MR1^^^XYZ\|\|ACCT1\|\|VISIT2<cr>

PV1\|\|O\|PT\|\|\|\|\|\|\|\|\|\|\|\|\|\|\|\|VISIT4<cr>

MRG\|MR1^^^XYZ\|\|ACCT1\|\|VISIT3<cr>

PV1\|\|O\|PT\|\|\|\|\|\|\|\|\|\|\|\|\|\|\|\|VISIT5<cr>

|

|Before Move |After Move

a|

MR1

ACCT1

VISIT1

VISIT2*

VISIT3*

X1

VISIT1

VISIT2

VISIT3

*Visits erroneously assigned

a|

MR1

ACCT1

VISIT1

X1

VISIT1

VISIT2

VISIT3

VISIT4**

VISIT5**

**visits moved and renumbered

a|

In the above transaction/implementation, the application that generated the message allows non-unique visit numbers.

Implementation Considerations: If Visit Numbers are not unique (as implied by the After Move example above) and renumbering of the visits is required, you must use a repeating MRG/PV1 construct as illustrated in the Example Transaction. Refer to _3.6.2.2.1_, "_A40 - merge patient - patient identifier list_," for additional information regarding message construct.

|

|===

===== A47 - change patient identifier list

[width="100%",cols="53%,47%",]

|===

|A47 - Change patient identifier list |

|Use Case - The Medical Records Department of XYZ hospital uses a system of manual medical record number assignment. During the admission process, the registrar accidentally assigned the wrong Medical Record Number (MR2 instead of MR1) to ADAM EVERYMAN. Since the correct Medical Record has not yet been assigned to any patient, no merge takes place. The Patient Identifier List is simply changed. |

|Target: _PID-3 - Patient Identifier List_ |

|Source: _MRG-1 - Prior Patient Identifier List_ |

a|

Example Transaction:

MSH\|^~\&\|REGADT\|MCM\|RSP1P8\|MCM\|200301051530\|SEC\|ADT^A47\|00000002\|P\|2.8\|<cr>

EVN\|A47\|200301051530<cr>

PID\|\|\|MR1^^^XYZ\|\|EVERYMAN^ADAM\|\|19501010\|M\|\|\|987 SOUTH STREET^^NY^NY^10021\|\|(212)111-3333\|\|\|S\|\|ACCT1<cr>

MRG\|MR2^^^XYZ\|\|ACCT1<cr>

|

|Before Change |After Change

a|

MR2

ACCT1

a|

MR1

ACCT1

|Implementation considerations: None. |

|===

===== A49 - change patient account number

[width="100%",cols="54%,46%",]

|===

|A49 - Change patient account number |

|Use Case - Patients are automatically assigned an account number by hospital XYZ's Patient Administration system at admission. However, when the Patient Administration system is down, the admitting clerk manually assigns account numbers from a pool of downtime account numbers. ADAM EVERYMAN (patient ID MR1) was manually assigned downtime account number ACCT1. When the Patient Administration system came back up, the admitting clerk accidentally entered the wrong account number, X1, into the system. When the problem was later discovered, the account number was changed from X1 to ACCT1. |

|Target: _PID-18 - Patient Account Number_ |

|Source: _MRG-3 - Prior Patient Account Number_ |

a|

Example Transaction:

MSH\|^~\&\|REGADT\|MCM\|RSP1P8\|MCM\|200301051530\|SEC\|ADT^A49^ADT_A30\|00000006\|P\|2.8\|<cr>

EVN\|A49\|200301051530<cr>

PID\|\|\|MR1^^^XYZ\|\|EVERYMAN^ADAM\|\|19501010\|M\|\|\|123 SOUTH STREET^^NY^NY^10021\|\|(212)111-2222\|\|\|S\|CAT\|ACCT1<cr>

MRG\|MR1^^^XYZ\|\|X1<cr>

|

|Before Change |After Change

a|

MR1

X1

a|

MR1

ACCT1

|Implementation Considerations: None. |

|===

===== A50 - change visit number 

[width="100%",cols="54%,46%",]

|===

|A50 - Change visit number |

|Use Case - Patients are automatically assigned a visit number by hospital XYZ's Patient Administration system at check-in. However, when the Patient Administration system is down, the admitting clerk manually assigns visit numbers from a pool of downtime numbers. ADAM EVERYMAN (patient ID MR1) was manually assigned downtime visit number VISIT1. When the Patient Administration system came back up, the admitting clerk accidentally entered the wrong visit number, VISIT2, into the system. When the problem was later discovered, the visit number was changed from VISIT2 to VISIT1. |

|Target: _PV1-19 - Visit Number_ |

|Source: _MRG-5 - Prior Visit Number_ |

a|

Example Transaction:

MSH\|^~\&\|REGADT\|MCM\|RSP1P8\|MCM\|200301051530\|SEC\|ADT^A50^ADT_A50\|00000006\|P\|2.8\|<cr>

EVN\|A50\|200301051530<cr>

PID\|\|\|MR1^^^XYZ\|\|EVERYMAN^ADAM\|\|19501010\|M\|\|\|123 SOUTH STREET^^NY^NY^10021\|\|(212)111-2222\|\|\|S\|CAT\|ACCT1<cr>

MRG\|MR1^^^XYZ\|\|ACCT1\|\|VISIT2<cr>

PV1\|1\|O\|\|3\|\|\|99^BROWN^JERRY\|\|\|ONC\|\|\|\|1\|\|VIP\|99^BROWN^JERRY\|O/P\|VISIT1...<cr>

|

|Before Change |After Change

a|

MR1

ACCT1

VISIT2

a|

MR1

ACCT1

VISIT1

|Implementation considerations: None. |

|===

===== A51 - change alternate visit ID

[width="100%",cols="54%,46%",]

|===

|A51 - Change alternate visit ID |

|Use Case - Patients are automatically assigned an alternate visit number by hospital XYZ's Patient Administration system at check-in. However, when the Patient Administration system is down, the admitting clerk manually assigns alternate visit numbers from a pool of downtime numbers. ADAM EVERYMAN was manually assigned downtime alternate visit number AV1. When the Patient Administration system came back up, the admitting clerk accidentally entered the wrong alternate visit number, AV2, into the system. When the problem was later discovered, the alternate visit number was changed from AV2 to AV1. |

|Target: _PV1-50 - Alternate Visit ID_ |

|Source: _MRG-6 - Prior Alternate Visit ID_ |

a|

Example Transaction:

MSH\|^~\&\|REGADT\|MCM\|RSP1P8\|MCM\|200301051530\|SECURITY\|ADT^A51^ADT_A50\|00000006\|P\|2.8\|<cr>

EVN\|A51\|200301051530<cr>

PID\|\|\|MR1^^^XYZ\|\|EVERYMAN^ADAM\|\|19501010\|M\|\|\|123 SOUTH STREET^^NY^NY^10021\|\|(212)111-2222\|\|\|S\|CAT\|ACCT1<cr>

MRG\|MR1^^^XYZ\|\|ACCT1\|\|\|AV2<cr>

PV1\|1\|O\|\|3\|\|\|99^BROWN^JERRY\|\|\|ONC\|\|\|\|1\|\|VIP\|99^BROWN^JERRY\|O/P\|V1\|SP\|\|\|\|\|\|\|\|\|\|\|\|\|\|\|\|\|\|\|A\|\|\|\|\|19990902081010\|\|\|\|\|\|AV1<cr>

|

|Before Change |After Change

a|

MR1

ACCT1

VISIT1

AV2

a|

MR1

ACCT1

VISIT1

AV1

|Implementation Considerations: None. |

|===

===== Example using multiple messages

[width="100%",cols="54%,46%",]

|===

|A47 - Change patient identifier list and A49 - Change patient account number |

|Use Case - Patients are automatically assigned Medical Records Numbers and account numbers by hospital XYZ's Patient Administration system at admission. However, when the Patient Administration system is down, the admitting clerk manually assigns account numbers and Medical Records numbers from a pool of downtime numbers. ADAM EVERYMAN was manually assigned downtime Medical Record Number MR1 and downtime account number A1. When the Patient Administration system came back up, the admitting clerk accidentally enters the wrong Medical Record Number (MR2) and account number (X1) into the system. The error occurred because she was reading from the paperwork for a different downtime admit not yet entered into the Patient Administration system. The problem is quickly discovered, and the medical record number and account number was fixed accordingly. Since the other downtime admit had not yet been entered into the Patient Administration system, no merge was required. |

|Target: _PID-3 - Patient Identifier List_ (Message 1) and _PID-18 - Patient Account Number_ (Message 2) |

|Source: _MRG-1 - Prior Patient Identifier List_ (Message 1) and _MRG-3 - Prior Patient Account Number_ (Message 2) |

a|

Example Transaction - Message 1:

MSH\|^~\&\|REGADT\|MCM\|RSP1P8\|MCM\|200301051530\|SEC\|ADT^A47^ADT_A30\|00000006\|P\|2.8\|<cr>

EVN\|A47\|200301051530<cr>

PID\|\|\|MR1^^^XYZ^MR\|\|EVERYMAN^ADAM\|\|19501010\|M\|\|\|123 SOUTH STREET^^NY^NY^10021\|\|(212)111-2222\|\|\|S\|CAT\|X1<cr>

MRG\|MR2^^^XYZ^MR\|<cr>

Example Transaction - Message 2:

MSH\|^~\&\|REGADT\|MCM\|RSP1P8\|MCM\|200301051530\|SEC\|ADT^A49^ADT_A30\|00000006\|P\|2.5<cr>

EVN\|A49\|200301051530<cr>

PID\|\|\|MR1^^^XYZ^MR\|\|EVERYMAN^ADAM\|\|19501010\|M\|\|\|123 SOUTH STREET^^NY^NY^10021\|\|(212)111-2222\|\|\|S\|CAT\|ACCT1<cr>

MRG\|MR1^^^XYZ^MR\|\|X1<cr>

|

|Before Change |After Change

a|

MR2

X1

a|

MR1

ACCT1

|Implementation considerations: Message 1 (A47) changes the patient identifier list. Message 2 (A49) changes the account number. |

|===

===== Example using multiple messages

[width="100%",cols="54%,46%",]

|===

|A44 - Move account information - patient account number and A49 - Change patient account number |

|Use Case - During the admitting process, the admitting clerk uses the Medical Record Number of Adam Everyman, III (MR1) instead of Adam Everyman, Jr. (MR2). The Patient Administration system assigns the new admission account number A1. When the mistake is discovered, the account is moved to the correct Medical Record, MR2. The Patient Administration system generates a new account number as a result: number X1. |

|Target: _PID-3 - Patient Identifier List_ (Message 1) and _PID-18 - Patient Account Number_ (Message 2) |

|Source: _MRG-1 - Prior Patient Identifier List_ (Message 1) and _MRG-3 - Prior Patient Account Number_ (Message 2) |

a|

Example Transaction (Message 1):

MSH\|^~\&\|REGADT\|MCM\|RSP1P8\|MCM\|200301051530\|SEC\|ADT^A44^ADT_A43\|00000007\|P\|2.8\|<cr>

EVN\|A44\|200301051530<cr>

PID\|\|\|MR2^^^XYZ^MR\|\|EVERYMAN^ADAM^A^JR\|\|19501010\|M\|\|\|123 EAST STREET^^NY^NY^10021\|\|(212)111-3333\|\|\|S\|\|ACCT1<cr>

MRG\|MR1^^^XYZ^MR\|\|ACCT1<cr>

Example Transaction (Message 2):

MSH\|^~\&\|REGADT\|MCM\|RSP1P8\|MCM\|200301051530\|SEC\|ADT^A49^ADT_A30\|00000007\|P\|2.5<cr>

EVN\|A49\|200301051530<cr>

PID\|\|\|MR2^^^XYZ^MR\|\|EVERYMAN^ADAM^A^JR\|\|19501010\|M\|\|\|123 EAST STREET^^NY^NY^10021\|\|(212)111-3333\|\|\|S\|\|X1<cr>

MRG\|MR2^^^XYZ^MR\|\|ACCT1<cr>

|

|Before Change |After Change

a|

MR1 MR2

ACCT1

a|

MR1 MR2

X1

|Implementation Considerations: Message 1, A44 (move account information-patient account number), moves the account from MR1 to MR2. Message 2, A49 (change patient account number), changes the account number. |

|===

=== Patient record links

Linking two or more patients does not require the actual merging of patient information as discussed in Section link:#merging-patientperson-information[_3.6.2_], "link:#merging-patientperson-information[_Merging patient/person information_];" following a link trigger event, sets of affected patient data records should remain distinct. However, because of differences in database architectures, there may be system-dependent limitations or restrictions regarding the linking of one or more patients that must be negotiated.

There are multiple approaches for implementing Master Patient Indexes. It is useful for the purpose of MPI mediation to support two types of linkage. Explicit linkage requires a message declaring a link has been made between multiple identifiers. Implicit linkage is performed when a receiving system infers the linkage from the presence of multiple identifiers present in _PID-3 - Patient Identifier List_.

In an MPI setting, the A24 -link patient information message is preferred for transmitting an explicit link of identifiers whether they are in the same or different assigning authorities. The A37 unlink patient information message is preferred for transmitting the explicit unlinking of identifiers.

Implicit linkage of identifiers, sometimes called passive linking, has been implemented using various messages. An acknowledged method is inclusion of multiple identifiers in _PID-3 - Patient Identifier List_, which the receiving system implicitly links. An MPI or application that makes such an implicit linkage can generate an A24 - link patient information message to explicitly notify another system of this action.

=== MPI Integration - an introduction

==== Definitions - what is an MPI?

There can be quite a bit of confusion as to what defines an MPI. Early definitions called it a Master Patient Index, implying only patient data would be managed. Later the definition was expanded to mean persons in general, including patients, guarantors, subscribers, and even providers; essentially any entity that could be considered a "person." Thus the current acronym MPI generally is inferred to mean Master Person Index.

An MPI is generally used to manage person identification and cross-reference across disparate systems. Healthcare organizations may have several systems handling various different data processing needs, from laboratory to billing, each with its own database of persons and person identifier numbering schemes. Each of these can be called an ID Domain. An MPI can function as a Correlation Manager between these domains, providing a cross-reference of a person's identifiers across each of the domains. Typically an MPI will also have one universal or enterprise identifier that uniquely identifies the person in the MPI itself. The domain for this identifier may or may not be the domain for clients of the MPI.

MPI functionality also typically includes methods to provide an identifier for a person, given a set of traits or demographics for that person. An example of the use of this is for a client system to query the MPI for a person given a set of demographics. The MPI uses matching algorithms to find possible matching persons, and returns to the client system the identifiers for those persons.

This section currently deals only with MPI functionality related to persons in the context of Version 2.4 and later. It is assuming integration using Version 2.4 and later ADT messages, and the functionality surrounding finding and identifying a person.

==== HL7 and CORBAmed PIDS

==== MPI QUERY for person lookup and identification

Several QBP/RSP queries have been developed to aid in the integration of systems with an MPI. They consist of several Qxx/Kxx trigger/response pairs and one Q24/K24 trigger/response pair. The following table lists their functions:

MPI QBP/RSP Queries

[width="100%",cols="15%,28%,57%",]

|===

|Query |Name |MPI Use

|Q21/K21 |Get Person Demographics |Given a person identifier, return the PID and optionally the PD1 segments for the matching person.

|Q22/K22 |Find Candidates |Given some demographics, optionally a match threshold and algorithm, find and return a list of matching persons.

|Q23/K23 |Get Corresponding Identifiers |Given a person's identifier and a list of identifier domains, return the person's identifiers in those domains.

|Q24/K24 |Allocate Identifiers |Given a list of identifier domains, return new identifiers for those domains. Should not link to a person, just reserve and return identifiers.

|===

The following sections show several scenarios involving looking up a person on a "client" system, and how it can be integrated to an MPI. The basic flow is for a user to enter person information on the client system, and the client system using services of the MPI to match the user's input to a person that exists somewhere on the two systems.

The scenarios are differentiated on two variables:

*ID Creator -* Which system assigns new person identifiers for the client system. This can either be the MPI or the client system.

*Person Existence -* On which system the person record currently exists - the client system, the MPI, or both.

==== Client system assigns identifier, person exists on MPI only

In this scenario, a client system (e.g., a registration system) will query an MPI for a person that does not currently exist on the client system. The MPI returns a list of one or more possible matching candidates, and one is chosen by the user on the client system. The client system assigns the person an identifier and an update is sent to the MPI to notify it of the new assigned identifier.

image:extracted-media/media/image5.wmf[extracted-media/media/image5]

===== *Figure 3-1* - Client system assigns identifier, person exists on MPI only

The messages are defined as follows:

*Q22/K22 Find Candidates* - This signals the MPI to search its database for a list of persons that match the demographic criteria sent in the query, using whatever algorithms it has at its disposal, or using the algorithm optionally specified in the query. The response includes a list of "candidates" that matched the criteria in the query, one PID segment for each candidate. The query can also specify the identifier domains to return in _PID-3 - Patient Identifier List_, so that the client system identifier and the MPI enterprise identifier could be returned for each match.

*Q21/K21 Get Person Demographics* - Once a candidate is chosen from the list, another query may be done to retrieve the full set of demographics for that person.

*A24 or A01/A04/A05* - This transaction is to update the MPI with the new identifier the client system has created for the person. It is acceptable for systems to simply send _an A01 Admit/visit notification,_ _A04 Register a patient or A05 Pre-admit a patient_ as may have been done traditionally, with the new client system identifier and the existing MPI enterprise identifier in PID-3. However an _A24 Link patient information_ may be sent instead, with one PID segment containing the MPI enterprise identifier for the person, and the second PID segment containing the new registration system identifier.

==== Client system assigns identifier, person exists on both systems

In this scenario, a client system (e.g., a registration system) will query an MPI for a person, and the person record exists on both systems. The MPI returns a list of possible matching candidates, and one is chosen by the user on the client system. The client system simply asks the MPI for an updated set of demographics and does not assign an identifier since the person already exists with an identifier on the client system.

Prior to querying the MPI, the client system may query its own database to reduce network transactions. However, the full searching capabilities of the MPI may be preferred to the client system in order to prevent the selection of the wrong person.

image:extracted-media/media/image6.emf[extracted-media/media/image6,width=504,height=480]

===== *Figure 3-2* - Client system assigns identifier, person exists on both systems

The message flow is identical to the message flow in the 3.6.4.5 example, with the exception that the final update to the MPI is not needed in order to give the MPI a new identifier for the person. The MPI should already have the client system identifier from previous transactions.

An ADT event may be sent later by the client system simply to update the MPI with any demographic changes that occur.

==== Client system assigns identifier, person exists on neither system

In this scenario, a client system (e.g., a registration system) will query an MPI for a person, and the person does not exist on either system. The MPI returns a list of possible matching candidates, or possibly an empty list. The user does _not_ choose one, and a new person record is created.

image:extracted-media/media/image7.emf[extracted-media/media/image7,width=584,height=440]

===== *Figure 3-3* - Client system assigns identifier, does not exist on either system

The message flow again begins with a _Q22/K22_ _Find Candidates_ query. The response may or may not contain a list of candidates.

If the client system assigns a person identifier when the record is created, an _A28 Add person information_ could be sent to the MPI to notify it of the record creation. If the client system does not create an identifier until the registration is completed, the A01, A04 or A05 events could serve the purpose of notifying the MPI of an added person and identifier. The fact that the person will have an identifier unknown to the MPI, and no enterprise identifier, will allow the MPI to infer that a person record is being added.

When the person record is added to the MPI with the new identifier, an enterprise identifier is assigned, and ancillary systems may be notified of the new person record creation.

==== MPI assigns identifier, person exists on MPI

In the next set of three scenarios, it is assumed that a third party (ID Manager) creates identifiers for the client system, and for these examples the MPI fulfills this role. The QBP/RSP queries support this service.

image:extracted-media/media/image8.emf[extracted-media/media/image8,width=624,height=304]

===== *Figure 3-4* - Example of two healthcare organizations merging

Figure 3-4 shows a case where identifiers may need to be assigned by a third party. In the example, East Health Organization had one identifier domain (XXXX numbers) for both the hospital registration system and the outpatient clinic registration numbers. Coordination was done through the use of pre-printed charts for new patients, which prevented the two systems from using the same XXXX number for two patients.

Later West Health Organization is bought and merged with East. West has been using its own identifier domain (YYYY numbers). An MPI is also implemented to keep a cross-reference between the two systems, and assigns its own enterprise identifier (EEEE number) to each patient.

Because the organization is attempting to go paperless, East decides to forgo its pre-printed charts, but still keep the XXXX numbers. Since the pre-printed charts are no longer there to keep numbers from being re-used between the hospital and clinic, a third party is needed to assign the XXXX numbers.

A patient arrives at East Hospital that had never been there, but had been to West previously. To register the patient, the hospital system submits a Find Candidates Q22/K22 query to get from the MPI a list of possible matching patients. The user finds the patient since she had been to West previously. Since the patient is new to East, she must be given a new East identifier (XXXX number). An Allocate Identifiers A56/K24 query is sent from the East Hospital to the MPI and the MPI generates an XXXX number and returns it. Later when the registration is finished, an A24 Link Person Information message is sent to notify the MPI that the allocated identifier has been assigned to a patient

In the following first scenario, the person record exists on the MPI, however it does not exist on the client system. The message flow assumes that the MPI is assigning identifiers for the client system that are not the enterprise identifiers. If this were not the case, the Allocate Identifiers A56/K24 query would not be needed.

____

image:extracted-media/media/image9.wmf[extracted-media/media/image9]

____

===== *Figure 3-5* - MPI assigns identifier, person exists on MPI

The message flow is similar to previous examples, with the exception of the _Q24/K24 Allocate Identifiers_ query and the final _A24 Link Patient Information_ message:

*Q24/K24 Allocate Identifiers* - This query is for the client system to ask the MPI for an identifier in the client system's domain. It is not to assign the identifier to a particular person record, but rather just to reserve an identifier for later use.

*A24 Link patient information* - This message is to notify the MPI that the previously allocated identifier has been assigned to a person. The A24 should include one PID segment with the new identifier and one PID segment with the MPI enterprise identifier.

==== MPI assigns identifier, person exists on both systems

===== *Figure 3- 6* - MPI assigns identifier, person exists on both systems

==== MPI assigns identifier, person exists on neither system

In this scenario, the person does not exist on either system. The message flow is similar to _3.6.4.7_, "_MPI assigns identifier, person exists on MPI_"; however, there is no need for the _Q21/K21Get person Demographics_ query as a double-check for the user since the person does not exist on the MPI. Also, after the person is registered and the identifier assigned, an _A28 Add Person Information_ is sent to the MPI to have it add the person to its database and assign an enterprise identifier.

image:extracted-media/media/image10.wmf[extracted-media/media/image10]

===== *Figure 3-7* - MPI assigns identifier, person exists on neither system

=== Usage notes: Non-human PID patient identification

The species attribute is required for non-human patients. The breed and strain attributes are conditional. Thus if the strain attribute is populated, the species attribute must be populated, but the breed attribute is optional. The production class attribute is optional, but if populated the species attribute must also be populated. The name of the animal populates the PID-5 attribute, component 2. The last name of the owner may populate component 1 of PID-5. Owner information is transmitted in the NK1 segment.

*Example 1*: Mrs. EVERYWOMAN brings her 9 year old, female, spayed miniature poodle, Fluffy, into the Allstate University, Veterinary Medical Teaching Hospital to have skin growths removed. The poodle resides with Mrs. EVERYWOMAN in her apartment at 2222 Home Street, Apt 123, in Ann Arbor, MI 11111, Washtenaw County;

MSH|^~\&||ALLSTATE UNIV VMTH|||200702171830||ADT^A04<cr>

PID|1||A83245^^^VMTH^MR^UCD||EVERYWOMAN^Fluffy^^^^^^D||19901001|S|||2222 Home St^Apt 123^Ann Arbor^MI^11111^USA^^^Washtenaw||||||||||||MI||||||||||||L-80700^Canine, NOS^SNM3|L-80832^Miniature Poodle, NOS^SNM3<cr>

NK1|1|EVERYWOMAN^EVE^M^^Mrs.^^L|O|2222 Home St^Apt 123^Ann Arbor^MI ^11111^USA^^^Washtenaw|(530) 555-4325^^^emeverywoman123@AOL.COM||CP|<cr>

PV1|1|O||R|||0045^BARKER^BART^^Dr.^DVM||||||||||||||||||||||||||||||||||||199902161015<cr>

mailto:[mailto:]OBX|1|NM|21611-9^Age^LN||9|yr<cr>

OBX|2|NM|3141-9^Body Weight^LN||16|lb<cr>

*Example 2:* Over the Hill Horses owns the Morgan horse mare named Breeze that is referred by Dr. Equine of Foothill Veterinary Clinic for colic (acute abdominal pain) to the Allstate University, Veterinary Medical Teaching Hospital. The manager of the farm and contact person is Randall "Buck" Shins, who works at the farm headquarters in Ypsilanti, MI, 11111:

MSH|^~\&||Foothill Veterinary Clinic||Allstate Univ VMTH|200702171830||ADT^A04<cr>

PID|1||N324256^^^^^Foothill Vet Clinic||^Breeze^^^^^^D|||F|||^^^MI^^^^^Lassen||||||||||||||||||19981123|Y|||||L-80400^Horse^SNM3|L-80431^Morgan horse^SNM3||BR<cr>

NK1|1||||||O|||||Over the Hill Horses|||||||||||||||||~Shins^Buck^^^Mr.^^N|(530) mailto:555-9843%5e%5e%5eBuckshins@OvertheHill.com|23[555-9843^^^Buckshins@OvertheHill.com|2222] Farm Rd ^Suite A^Ypsilanti^MI^11111^^^^Lassen<cr>

PV1|1|E||R|||^Equine^^^Dr.^DVM||||||||||||||||||||||||||||||||||||199903102013<cr>

